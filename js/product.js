"use strict";var xmlhttp,num = 0;xmlhttp = window.XMLHttpRequest ? new XMLHttpRequest() : new ActiveXObject("Microsoft.XMLHTTP");for (var img_arr_small = document.getElementsByClassName("pro-img-ul")[0].children, i = 0; i < img_arr_small.length; i++) {img_arr_small[i].onclick = function (t) {var n = document.getElementById("product_img");return function () {for (var e = 0; e < img_arr_small.length; e++) {img_arr_small[e].style.border = "0px solid white";}img_arr_small[t].style.border = "1px solid orange", n.setAttribute("src", img_arr_small[t].children[0].src);};}(i);}function jian(e) {var t = e.nextElementSibling.value;"1" == t ? e.setAttribute("disabled", "disabled") : t -= 1, e.nextElementSibling.value = t;}function add(e) {var t = parseInt(e.previousElementSibling.value),n = e.previousElementSibling.previousElementSibling;n.removeAttribute("disabled"), n.value = " - ", t++, e.previousElementSibling.value = t;}function is_number(e) {0 == /^[0-9]*$/.test(e.value) || "" == e.value ? e.value = 1 : parseFloat(e.value) < 1 ? e.value = 1 : /^\d+(\.\d+)?$/.test(e.value) ? e.value = parseInt(e.value) : e.value = parseFloat(e.value);}function go_car() {"退出" == register_user.innerHTML ? window.open("shopping_cart.html") : (alert("请先登录"), window.open("login.html"));}function to_1(e) {window.localStorage.classname1 = "", window.localStorage.classname1 = e.innerHTML;}function add_cart(e) {var t = document.getElementById("product_img").src.substring(27),n = document.getElementsByClassName("inp-shu")[0].value,r = document.getElementsByClassName("money")[0].innerHTML.substring(1, 4);xmlhttp.open("GET", "php/add_cart.php?img=" + t + "&name=" + e + "&money=" + r + "&shu=" + n, !0), xmlhttp.send();}document.getElementsByClassName("addshop")[0].onclick = function () {if ("退出" == register_user.innerHTML) {var t = document.getElementsByClassName("pro-r")[0].children[0].innerHTML,e = window.localStorage.gouwucar;window.localStorage.gouwucar = Number(e) + 1, console.log(Number(e) + 1), xmlhttp.open("GET", "php/cart.php?name=" + t, !0), xmlhttp.send(), xmlhttp.onreadystatechange = function () {if (4 == xmlhttp.readyState && 200 == xmlhttp.status) if (0 == JSON.parse(xmlhttp.responseText).length) {alert("成功加入购物车");var e = document.getElementById("gouwucar");document.getElementById("gouwucar").innerHTML = Number(e.innerHTML) + 1, add_cart(t), num++, window.localStorage.gouwucar = num;} else alert("你已经添加过购物车了");};} else alert("请先登录"), window.open("login.html");}, document.getElementsByClassName("buy")[0].onclick = function () {"退出" == register_user.innerHTML ? window.open("shopping_cart.html") : (alert("请先登录"), window.open("login.html"));}, window.onload = function () {var e = window.localStorage.classname2,t = document.getElementById("login_user"),n = document.getElementById("head_user"),r = document.getElementById("register_user");(e ? (t.innerHTML = "欢迎你,", n.innerHTML = window.localStorage.classname2, r.innerHTML = "退出", r.href = "#", t.href = "#", r.onclick = function () {var e = document.getElementById("register_user").innerHTML;if (console.log(e), "注册" != e) {if (confirm("确定退出登录吗？")) return t.innerHTML = "登录", r.innerHTML = "注册", n.innerHTML = "", t.href = "login.html", window.localStorage.classname2 = "", document.getElementById("gouwucar").classList.remove("gouwucar"), document.getElementById("gouwucar").innerHTML = "", !1;} else r.href = "register.html";}) : (t.innerHTML = "登录", t.href = "login.html", r.innerHTML = "注册", n.innerHTML = "", r.href = "register.html"), "退出" == document.getElementById("register_user").innerHTML) && (document.getElementById("gouwucar").classList.add("gouwucar"), window.localStorage.gouwucar ? document.getElementById("gouwucar").innerHTML = window.localStorage.gouwucar : document.getElementById("gouwucar").innerHTML = "0");var l = window.localStorage.classname3;xmlhttp.open("GET", "php/get_product.php?who=" + l, !0), xmlhttp.send(), xmlhttp.onreadystatechange = function () {if (4 == xmlhttp.readyState && 200 == xmlhttp.status) {var e = JSON.parse(xmlhttp.responseText),t = document.getElementById("product_img"),n = document.getElementsByClassName("pro-img-ul")[0].children;n[0].children[0].setAttribute("src", e[0].src), n[0].children[0].width = "100%", n[0].children[0].height = "100%", n[1].children[0].src = e[0].src2, n[1].children[0].width = "100%", n[1].children[0].height = "100%", n[2].children[0].src = e[0].src3, n[2].children[0].width = "100%", n[2].children[0].height = "100%", n[3].children[0].src = e[0].src4, n[3].children[0].width = "100%", n[3].children[0].height = "100%";var r = document.getElementsByClassName("pro-r")[0].children[0],l = document.getElementsByClassName("money")[0];t.src = e[0].src, r.innerHTML = e[0].who, l.innerHTML = e[0].much;}};};